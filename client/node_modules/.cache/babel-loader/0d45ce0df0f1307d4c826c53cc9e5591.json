{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Or\\\\MernStackProject (1)\\\\MernStackProject\\\\client\\\\src\\\\components\\\\screens\\\\CreatePost.js\";\nimport React, { useState, useEffect } from \"react\";\nimport M from \"materialize-css\";\nimport { useHistory } from \"react-router-dom\";\n\nconst CreatePost = () => {\n  const history = useHistory();\n  const [title, setTitle] = useState(\"\");\n  const [body, setBody] = useState(\"\");\n  const [price, setPrice] = useState(\"\");\n  const [image, setImage] = useState(\"\");\n  const [loader, setLoader] = useState(\"\");\n  const [url, setUrl] = useState(\"\");\n  useEffect(() => {\n    if (url) {\n      fetch(\"/createpost\", {\n        method: \"post\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n        },\n        body: JSON.stringify({\n          title,\n          body,\n          pic: url,\n          price\n        })\n      }).then(res => res.json()).then(data => {\n        if (data.error) {\n          M.toast({\n            html: data.error,\n            classes: \"#b71c1c red darken-4\"\n          });\n        } else {\n          M.toast({\n            html: \"Created Post Successfully\",\n            classes: \"#689f38 light-green darken-2\"\n          });\n          history.push(\"/\");\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }, [url]);\n\n  const postDetail = () => {\n    setLoader(\"indeterminate\");\n    const data = new FormData();\n    data.append(\"file\", image);\n    data.append(\"upload_preset\", \"mern-stack-project\");\n    data.append(\"cloud_name\", \"dyiceswks\");\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n    const cloudinaryURL = \"https://api.cloudinary.com/v1_1/dyiceswks/image/upload\";\n    fetch(cloudinaryURL, {\n      method: \"post\",\n      body: data\n    }).then(res => res.json()).then(data => {\n      setUrl(data.url);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card input-file\",\n    style: {\n      margin: \"30px auto\",\n      maxWidth: \"500px\",\n      padding: \"20px\",\n      textAlign: \"center\",\n      direction: \"rtl\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"\\u05E9\\u05DD \\u05D4\\u05DE\\u05D5\\u05E6\\u05E8\",\n    value: title,\n    onChange: e => setTitle(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"\\u05EA\\u05D0\\u05D5\\u05E8 \\u05D4\\u05DE\\u05D5\\u05E6\\u05E8\",\n    value: body,\n    onChange: e => setBody(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    placeholder: \"\\u05DE\\u05D7\\u05D9\\u05E8\",\n    value: price,\n    onChange: e => setPrice(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"file-field input-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btn blue darken-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, \"add_a_photo\")), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    onChange: e => setImage(e.target.files[0]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"file-path-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"file-path validate\",\n    type: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn waves-effect blue darken-1\",\n    onClick: () => postDetail(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }, \"\\u05D0\\u05D9\\u05E9\\u05D5\\u05E8 \\u05DE\\u05D5\\u05E6\\u05E8\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"progress\",\n    style: {\n      margin: \"4% auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: loader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default CreatePost;","map":{"version":3,"sources":["C:/Users/Or/MernStackProject (1)/MernStackProject/client/src/components/screens/CreatePost.js"],"names":["React","useState","useEffect","M","useHistory","CreatePost","history","title","setTitle","body","setBody","price","setPrice","image","setImage","loader","setLoader","url","setUrl","fetch","method","headers","localStorage","getItem","JSON","stringify","pic","then","res","json","data","error","toast","html","classes","push","catch","err","console","log","postDetail","FormData","append","proxyurl","cloudinaryURL","margin","maxWidth","padding","textAlign","direction","e","target","value","files"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport M from \"materialize-css\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst CreatePost = () => {\r\n  const history = useHistory();\r\n  const [title, setTitle] = useState(\"\");\r\n  const [body, setBody] = useState(\"\");\r\n  const [price, setPrice] = useState(\"\");\r\n  const [image, setImage] = useState(\"\");\r\n  const [loader, setLoader] = useState(\"\");\r\n  const [url, setUrl] = useState(\"\");\r\n  useEffect(() => {\r\n    if (url) {\r\n      fetch(\"/createpost\", {\r\n        method: \"post\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\"),\r\n        },\r\n        body: JSON.stringify({\r\n          title,\r\n          body,\r\n          pic: url,\r\n          price\r\n        }),\r\n      })\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n          if (data.error) {\r\n            M.toast({ html: data.error, classes: \"#b71c1c red darken-4\" });\r\n          } else {\r\n            M.toast({\r\n              html: \"Created Post Successfully\",\r\n              classes: \"#689f38 light-green darken-2\",\r\n            });\r\n            history.push(\"/\");\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    }\r\n  }, [url]);\r\n\r\n  const postDetail = () => {\r\n    setLoader(\"indeterminate\");\r\n    const data = new FormData();\r\n    data.append(\"file\", image);\r\n    data.append(\"upload_preset\", \"mern-stack-project\");\r\n    data.append(\"cloud_name\", \"dyiceswks\");\r\n    const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\r\n    const cloudinaryURL = \"https://api.cloudinary.com/v1_1/dyiceswks/image/upload\";\r\n    fetch(cloudinaryURL, {\r\n      method: \"post\",\r\n      body: data,\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        setUrl(data.url);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"card input-file\"\r\n      style={{\r\n        margin: \"30px auto\",\r\n        maxWidth: \"500px\",\r\n        padding: \"20px\",\r\n        textAlign: \"center\",\r\n        direction: \"rtl\"\r\n      }}\r\n    >\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"שם המוצר\"\r\n        value={title}\r\n        onChange={(e) => setTitle(e.target.value)}\r\n      />\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"תאור המוצר\"\r\n        value={body}\r\n        onChange={(e) => setBody(e.target.value)}\r\n      />\r\n      <input\r\n        type=\"number\"\r\n        placeholder=\"מחיר\"\r\n        value={price}\r\n        onChange={(e) => setPrice(e.target.value)}\r\n      />\r\n      <div className=\"file-field input-field\">\r\n        <div className=\"btn blue darken-1\">\r\n          <span>\r\n            <i className=\"material-icons\">add_a_photo</i>\r\n          </span>\r\n          <input type=\"file\" onChange={(e) => setImage(e.target.files[0])} />\r\n        </div>\r\n        <div className=\"file-path-wrapper\">\r\n          <input className=\"file-path validate\" type=\"text\" />\r\n        </div>\r\n      </div>\r\n      <button\r\n        className=\"btn waves-effect blue darken-1\"\r\n        onClick={() => postDetail()}\r\n      >\r\n        אישור מוצר\r\n      </button>\r\n      <div className=\"progress\" style={{margin: \"4% auto\"}}>\r\n        <div className={loader}></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreatePost;\r\n"]},"metadata":{},"sourceType":"module"}