{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Or\\\\MernStackProject (1)\\\\MernStackProject\\\\client\\\\src\\\\components\\\\screens\\\\PaymentSuccess.js\";\nimport React, { useEffect, useState, useContext } from \"react\";\nimport { UserContext } from \"../../App\";\nimport M from \"materialize-css\";\nimport { useParams, useLocation } from \"react-router-dom\";\n\nconst PaymentSuccess = () => {\n  const {\n    state,\n    dispatch\n  } = useContext(UserContext);\n  const {\n    url\n  } = useParams();\n  let location = useLocation();\n\n  function getParameterByName(name, url) {\n    name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\n    var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n        results = regex.exec(url);\n    if (!results) return null;\n    if (!results[2]) return \"\";\n    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n  }\n\n  useEffect(() => {\n    console.log(state);\n\n    if (state) {\n      const paymentId = getParameterByName(\"paymentId\", location.search);\n      const PayerID = getParameterByName(\"PayerID\", location.search);\n      fetch(`/success/${state._id}`, {\n        method: \"post\",\n        headers: {\n          \"Content-Type\": \"application/json\" // Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n\n        },\n        body: JSON.stringify({\n          paymentId,\n          PayerID\n        })\n      }).then(res => res.json()).then(result => {\n        if (result) {\n          console.log(result);\n        } else {\n          console.log(result);\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }, \"\\u05D4\\u05EA\\u05E9\\u05DC\\u05D5\\u05DD \\u05D1\\u05D5\\u05E6\\u05E2 \\u05D1\\u05D4\\u05E6\\u05DC\\u05D7\\u05D4\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }, \"url\"));\n};\n\nexport default PaymentSuccess;","map":{"version":3,"sources":["C:/Users/Or/MernStackProject (1)/MernStackProject/client/src/components/screens/PaymentSuccess.js"],"names":["React","useEffect","useState","useContext","UserContext","M","useParams","useLocation","PaymentSuccess","state","dispatch","url","location","getParameterByName","name","replace","regex","RegExp","results","exec","decodeURIComponent","console","log","paymentId","search","PayerID","fetch","_id","method","headers","body","JSON","stringify","then","res","json","result","catch","err"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,SAASC,WAAT,QAA4B,WAA5B;AACA,OAAOC,CAAP,MAAc,iBAAd;AACA,SACEC,SADF,EAEEC,WAFF,QAGO,kBAHP;;AAKA,MAAMC,cAAc,GAAG,MAAM;AAC3B,QAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAsBP,UAAU,CAACC,WAAD,CAAtC;AACA,QAAM;AAAEO,IAAAA;AAAF,MAAUL,SAAS,EAAzB;AACA,MAAIM,QAAQ,GAAGL,WAAW,EAA1B;;AAEA,WAASM,kBAAT,CAA4BC,IAA5B,EAAkCH,GAAlC,EAAuC;AACrCG,IAAAA,IAAI,GAAGA,IAAI,CAACC,OAAL,CAAa,SAAb,EAAwB,MAAxB,CAAP;AACA,QAAIC,KAAK,GAAG,IAAIC,MAAJ,CAAW,SAASH,IAAT,GAAgB,mBAA3B,CAAZ;AAAA,QACEI,OAAO,GAAGF,KAAK,CAACG,IAAN,CAAWR,GAAX,CADZ;AAEA,QAAI,CAACO,OAAL,EAAc,OAAO,IAAP;AACd,QAAI,CAACA,OAAO,CAAC,CAAD,CAAZ,EAAiB,OAAO,EAAP;AACjB,WAAOE,kBAAkB,CAACF,OAAO,CAAC,CAAD,CAAP,CAAWH,OAAX,CAAmB,KAAnB,EAA0B,GAA1B,CAAD,CAAzB;AACD;;AAEDd,EAAAA,SAAS,CAAC,MAAM;AACZoB,IAAAA,OAAO,CAACC,GAAR,CAAYb,KAAZ;;AACF,QAAIA,KAAJ,EAAW;AACT,YAAMc,SAAS,GAAGV,kBAAkB,CAAC,WAAD,EAAcD,QAAQ,CAACY,MAAvB,CAApC;AACA,YAAMC,OAAO,GAAGZ,kBAAkB,CAAC,SAAD,EAAYD,QAAQ,CAACY,MAArB,CAAlC;AACAE,MAAAA,KAAK,CAAE,YAAWjB,KAAK,CAACkB,GAAI,EAAvB,EAA0B;AAC7BC,QAAAA,MAAM,EAAE,MADqB;AAE7BC,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT,CAEP;;AAFO,SAFoB;AAM7BC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBT,UAAAA,SADmB;AAEnBE,UAAAA;AAFmB,SAAf;AANuB,OAA1B,CAAL,CAWGQ,IAXH,CAWSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EAXjB,EAYGF,IAZH,CAYSG,MAAD,IAAY;AAChB,YAAIA,MAAJ,EAAY;AACVf,UAAAA,OAAO,CAACC,GAAR,CAAYc,MAAZ;AACD,SAFD,MAEO;AACLf,UAAAA,OAAO,CAACC,GAAR,CAAYc,MAAZ;AACD;AACF,OAlBH,EAmBGC,KAnBH,CAmBUC,GAAD,IAAS;AACdjB,QAAAA,OAAO,CAACC,GAAR,CAAYgB,GAAZ;AACD,OArBH;AAsBD;AACF,GA5BQ,EA4BN,EA5BM,CAAT;AA8BA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0GADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAFF,CADF;AAMD,CAlDD;;AAoDA,eAAe9B,cAAf","sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\r\nimport { UserContext } from \"../../App\";\r\nimport M from \"materialize-css\";\r\nimport {\r\n  useParams,\r\n  useLocation,\r\n} from \"react-router-dom\";\r\n\r\nconst PaymentSuccess = () => {\r\n  const { state, dispatch } = useContext(UserContext);\r\n  const { url } = useParams();\r\n  let location = useLocation();\r\n\r\n  function getParameterByName(name, url) {\r\n    name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\r\n    var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\r\n      results = regex.exec(url);\r\n    if (!results) return null;\r\n    if (!results[2]) return \"\";\r\n    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\r\n  }\r\n\r\n  useEffect(() => {\r\n      console.log(state)\r\n    if (state) {\r\n      const paymentId = getParameterByName(\"paymentId\", location.search);\r\n      const PayerID = getParameterByName(\"PayerID\", location.search);\r\n      fetch(`/success/${state._id}`, {\r\n        method: \"post\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          // Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\r\n        },\r\n        body: JSON.stringify({\r\n          paymentId,\r\n          PayerID,\r\n        }),\r\n      })\r\n        .then((res) => res.json())\r\n        .then((result) => {\r\n          if (result) {\r\n            console.log(result);\r\n          } else {\r\n            console.log(result);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <h1>התשלום בוצע בהצלחה</h1>\r\n      <p>url</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PaymentSuccess;\r\n"]},"metadata":{},"sourceType":"module"}