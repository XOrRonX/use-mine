{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\danny\\\\MernStackProject\\\\client\\\\src\\\\components\\\\screens\\\\CreatePost.js\";\nimport React, { useState, useEffect } from \"react\";\nimport M from \"materialize-css\";\nimport { useHistory } from \"react-router-dom\";\n\nconst CreatePost = () => {\n  const history = useHistory();\n  const [title, setTitle] = useState(\"\");\n  const [body, setBody] = useState(\"\");\n  const [image, setImage] = useState(\"\");\n  const [url, setUrl] = useState(\"\");\n  useEffect(() => {\n    if (url) {\n      fetch(\"/createpost\", {\n        method: \"post\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\n        },\n        body: JSON.stringify({\n          title,\n          body,\n          pic: url\n        })\n      }).then(res => res.json()).then(data => {\n        if (data.error) {\n          M.toast({\n            html: data.error,\n            classes: \"#b71c1c red darken-4\"\n          });\n        } else {\n          M.toast({\n            html: \"Created Post Successfully\",\n            classes: \"#689f38 light-green darken-2\"\n          });\n          history.push(\"/\");\n        }\n      }).catch(err => {\n        console.log(\"hey\");\n      });\n    }\n  }, [url]);\n\n  const postDetail = () => {\n    const data = new FormData();\n    data.append(\"file\", image);\n    data.append(\"upload_preset\", \"mern-stack-project\");\n    data.append(\"cloud_name\", \"dyiceswks\");\n    fetch(\"https://api.cloudinary.com/v1_1/dyiceswks/image/upload\", {\n      method: \"post\",\n      body: data\n    }).then(res => res.json()).then(data => {\n      setUrl(data.url);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card input-file\",\n    style: {\n      margin: \"30px auto\",\n      maxWidth: \"500px\",\n      padding: \"20px\",\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"title\",\n    value: title,\n    onChange: e => setTitle(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"body\",\n    value: body,\n    onChange: e => setBody(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"file-field input-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btn blue darken-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    class: \"material-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, \"add_a_photo\")), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    onChange: e => setImage(e.target.files[0]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"file-path-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"file-path validate\",\n    type: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn waves-effect blue darken-1\",\n    onClick: () => postDetail(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, \"Submit Post\"));\n};\n\nexport default CreatePost;","map":{"version":3,"sources":["C:/Users/danny/MernStackProject/client/src/components/screens/CreatePost.js"],"names":["React","useState","useEffect","M","useHistory","CreatePost","history","title","setTitle","body","setBody","image","setImage","url","setUrl","fetch","method","headers","Authorization","localStorage","getItem","JSON","stringify","pic","then","res","json","data","error","toast","html","classes","push","catch","err","console","log","postDetail","FormData","append","margin","maxWidth","padding","textAlign","e","target","value","files"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport M from \"materialize-css\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst CreatePost = () => {\r\n  const history = useHistory();\r\n  const [title, setTitle] = useState(\"\");\r\n  const [body, setBody] = useState(\"\");\r\n  const [image, setImage] = useState(\"\");\r\n  const [url, setUrl] = useState(\"\");\r\n  useEffect(() => {\r\n    if (url) {\r\n      fetch(\"/createpost\", {\r\n        method: \"post\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\r\n        },\r\n        body: JSON.stringify({\r\n          title,\r\n          body,\r\n          pic: url,\r\n        }),\r\n      })\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n          if (data.error) {\r\n            M.toast({ html: data.error, classes: \"#b71c1c red darken-4\" });\r\n          } else {\r\n            M.toast({\r\n              html: \"Created Post Successfully\",\r\n              classes: \"#689f38 light-green darken-2\",\r\n            });\r\n            history.push(\"/\");\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"hey\");\r\n        });\r\n    }\r\n  }, [url]);\r\n\r\n  const postDetail = () => {\r\n    const data = new FormData();\r\n    data.append(\"file\", image);\r\n    data.append(\"upload_preset\", \"mern-stack-project\");\r\n    data.append(\"cloud_name\", \"dyiceswks\");\r\n    fetch(\"https://api.cloudinary.com/v1_1/dyiceswks/image/upload\", {\r\n      method: \"post\",\r\n      body: data,\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        setUrl(data.url);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"card input-file\"\r\n      style={{\r\n        margin: \"30px auto\",\r\n        maxWidth: \"500px\",\r\n        padding: \"20px\",\r\n        textAlign: \"center\",\r\n      }}\r\n    >\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"title\"\r\n        value={title}\r\n        onChange={(e) => setTitle(e.target.value)}\r\n      />\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"body\"\r\n        value={body}\r\n        onChange={(e) => setBody(e.target.value)}\r\n      />\r\n      <div className=\"file-field input-field\">\r\n        <div className=\"btn blue darken-1\">\r\n          <span>\r\n            <i class=\"material-icons\">add_a_photo</i>\r\n          </span>\r\n          <input type=\"file\" onChange={(e) => setImage(e.target.files[0])} />\r\n        </div>\r\n        <div className=\"file-path-wrapper\">\r\n          <input className=\"file-path validate\" type=\"text\" />\r\n        </div>\r\n      </div>\r\n      <button\r\n        className=\"btn waves-effect blue darken-1\"\r\n        onClick={() => postDetail()}\r\n      >\r\n        Submit Post\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreatePost;\r\n"]},"metadata":{},"sourceType":"module"}